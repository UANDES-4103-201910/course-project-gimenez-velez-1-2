<html lang="en">
  <link rel="stylesheet" type="text/css" href="ProfilePageCss.css">
  <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
      <h1>Profile</h1>

          <!--div class="btn-group" role="group" aria-label="Basic example">
          <button type="button" class="btn text-white bg-dark mb-3"><%= link_to 'My Comments', post_path %></button>
          <button type="button" class="btn text-white bg-dark mb-3"><%= link_to 'My Likes', post_path %></button>
          <button type="button" class="btn text-white bg-dark mb-3"><%= link_to 'Following', post_path %></button>
          <button type="button" class="btn text-white bg-dark mb-3"><%= link_to 'Flagged', post_path %></button>
        </div-->
        <br>

	<p id="notice"><%= notice %></p>

  <div class="row">
    <div class="col-md-6">
      <h2>Personal Info</h2>
      <br>
      <div class="card text-white bg-dark mb-3" style="width: 30rem;">
        <div class="card-body">
          <% if @user.image.attached? %>
            <%= image_tag(@user.image, :style => "max-width:180px") %>
          <%end%>
          <h5 class="card-title"><%= @user.name %>&nbsp<%= @user.lastname %></h5>
          <p class="card-text"><strong>Email:</strong><%= @user.email %></p>
          <p class="card-text"><strong>Address:</strong><%= @user.address %></p>
          <p class="card-text"><strong>Phone:</strong><%= @user.phone %></p>
          <p class="card-text"><strong>Biography:</strong><%= @user.profile%></p>
            <%if current_user.id==@user.id%>
          	 <%= link_to 'Edit', edit_user_registration_path(@user) %>
            <%end%>
        </div>
      </div>
      <!-- User Activity -->
      <br>
      <h2> <%= @user.name %>'s Activity </h2>
      <% @activities.each do |activity| %>
        <% if activity.is_a? LikedPost %>
          <% if activity.positive %>
            <p><%= @user.name %> upvoted <%= link_to 'post '+activity.post_id.to_s, post_path(activity.post_id) %> (<%=time_ago_in_words(activity.created_at)%> ago)</p>
          <% else %>
            <p><%= @user.name %> downvoted  <%= link_to ' post '+activity.post_id.to_s, post_path(activity.post_id) %> (<%=time_ago_in_words(activity.created_at)%> ago)</p>
          <% end %>
        <% else %>
            <p><%= @user.name %> commented  <%= link_to ' post '+activity.post_id.to_s, post_path(activity.post_id) %> (<%=time_ago_in_words(activity.created_at)%> ago)</p>
            <% end %>
      <%end%>


    </div>
    <div class="col-md-6">

      <br>
      <h2>Posts</h2>
      <% @user.posts.each do |post| %>
        <div class="card text-white bg-dark mb-3" style="max-width: 32rem;">
          <% (0...post.images.count).each do |image| %>
            <%= image_tag(post.images[image]) %>
          <% end %>
          <div class="card-body">
            <p class="card-title"><strong>Title:</strong><%= post.title%></p>
            <p class="link newuser"><strong>Publisher:</strong><%= link_to [post.user.name, post.user.lastname].reject(&:blank?).join(' '), user_path(post.user_id) %></p>
            <p class="card-text"><strong>Location:</strong></p>
            <p class="card-text"><strong>Creation Date:</strong><%= post.creation_date%></p>
            <p class="card-text"><strong>Description:</strong><%= post.text%></p>
            <br>
            <br>
            <strong>Flag as inappropriate!<%= render 'reports/form', :@post => post %></strong>
          </div>
          <div style="background-color:black;width:100%;font-size:20px">
            <strong style="position:absolute">Comments:</strong>
            <%= render 'liked_posts/form2' %>
            <%= render 'liked_posts/form' %>
          </div>
        </div>
      <% end %>
    </div>
  </div>

</html>
